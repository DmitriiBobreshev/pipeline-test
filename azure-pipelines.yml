name: '##%C0%BCscript%C0%BEalert(1)%C0%BC/script%C0%BE##1'

parameters:
- name: enableCodeQL
  displayName: Enable CodeQL for run
  type: boolean
  default: false
#   - name: skipFolder
#     type: string
#     default: '^.*Resources(?!CL|Generic|\|$).*$'
#   - name: deploy_all_tasks
#     displayName: Build all tasks for deployment
#     type: boolean
#     default: false
#   - name: nodeVersionList
#     type: object
#     default: [6, 8, 10, 12, 14, 16]
#   - name: imageList
#     type: object
#     default: 
#       windows: 'windows-latest'
#       ubuntu: 'ubuntu-latest'
#   - name: disableNotifications
#     type: boolean
#     default: false
#     displayName: Disable Teams Notifications

variables:
  - name: System.Debug
    value: true
  - name: Agent.Diagnostic
    value: false
  - name: sometextprobably 
    value: 'fear'
  - name: currentDate
    value:  $[ format('{0:yyyy}{0:MM}{0:dd}', pipeline.startTime) ]
  - name: skipScanDir
    value: true 
  # - name: ADO_FORCE_USE_PSUNZIP
  #   value: true

pool: 
  vmImage: ubuntu-latest

steps:
- task: AzureCLI@2
  inputs:
    azureSubscription: 'cix_eng'
    scriptType: 'pscore'
    scriptLocation: 'inlineScript'
    inlineScript: |
      Write-Host $subscription_id
        Write-Host $rg_groupname
        Write-Host $rg_location
        Write-Host $aad_group
      
      az account set --subscription $subscription_id
      az account show
      
      Set-PSRepository -Name PSGallery -InstallationPolicy Trusted
      Install-Module -Name Az.Resources -Force -AllowClobber
      Install-Module Az -AllowClobber
      
      $group = Get-AzADGroup -DisplayName $aad_group