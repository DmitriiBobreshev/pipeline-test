steps:
- task: NuGetToolInstaller@1
  displayName: Nuget Tool Install version 1
  condition: ${{ and(succeeded(), eq(parameters.nugetVersion, 'custom')) }}
  inputs:
    checkLatest: true
    versionSpec: '5'
  retryCountOnTaskFailure: 3

- task: NuGetInstaller@0
  inputs:
    solution: 'src/msbuild/projects/SimpleConsoleAppCore2/TestConsoleApp.sln'
    restoreMode: 'restore' # 'restore' | 'install'. Required. Installation type. Default: restore.
    verbosity: 'Detailed' 
    nuGetVersion: '${{ parameters.nugetVersion }}'
    ${{ if eq(parameters.nugetVersion, 'custom') }}:
      nuGetPath: 'test'